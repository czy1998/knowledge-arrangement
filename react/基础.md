# React基础

## 生命周期
* constructor
* componentDidMount
* componentDidCatch
* componentDidUpdate
* shouldComponentUpdate
* getDerivedStateFromProps(nextProps, prevState)

## VDOM diff算法
virtual Dom就是一个js的对象，是虚拟的dom。
在react中，每次setState之后react都会生成一个新的vdom tree，与旧的tree进行diff比较，得到差异的地方之后一次性patch到真实的dom上。
* 按tree的层级diff
* 按类型进行diff<组件的类型>
* 按列表进行diff<设置key可以提高diff的效率>

## setState同异步的问题
在原生事件（原生自带的事件监听，addEventListener，或者直接操作原生js获取dom节点对其绑定事件）中是同步的。  
在react class中的合成事件，生命周期事件中setState是异步的。  
在setTimeout里的setState因为event loop的原因，总是同步的。因为setTimeout会放在单独的队列里，等到队列执行完毕，isBatchingUpdate（react中setState里的一个标志）已经是false了，这个时候就会是同步的表现。  
所谓的异步是因为调用顺序在更新之前，导致无法立即拿到最新的值。但是可以通过callback拿到更新后的结果。